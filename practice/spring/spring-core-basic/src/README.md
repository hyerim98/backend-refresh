# ê°ì²´ì§€í–¥ ì„¤ê³„ ì˜ˆì œ

## ì´ ì˜ˆì œì˜ ëª©ì 
- ê°ì²´ì§€í–¥ ì„¤ê³„ ì›ì¹™(ì„¹ì…˜2)ì„ ì½”ë“œë¡œ ê²€ì¦
- ìŠ¤í”„ë§ DIë¡œ ë°œì „í•˜ëŠ” íë¦„ ì´í•´

---

## ì„¤ê³„ ì§„í™” íˆìŠ¤í† ë¦¬

### v1. ìˆœìˆ˜ ìë°” ê¸°ë°˜ ì„¤ê³„(ì„¹ì…˜3)
ğŸ‘‰ ëª©ì 
- ê°ì²´ì§€í–¥ ì„¤ê³„ ì›ì¹™ì„ ê°„ë‹¨í•œ ì£¼ë¬¸/í• ì¸ ë„ë©”ì¸ìœ¼ë¡œ êµ¬í˜„
- ë‹¤í˜•ì„±ê³¼ ì—­í• /êµ¬í˜„ ë¶„ë¦¬ ì²´ê°

âš ï¸ ë¬¸ì œì 
- ServiceImpl ì†ŒìŠ¤ë¥¼ ë³´ë©´ êµ¬í˜„ì²´ì— ì§ì ‘ ì˜ì¡´í•˜ê³  ìˆìŒ
- ê°ì²´ ìƒì„±ê³¼ ì—°ê²° ì±…ì„ì´ í´ë¼ì´ì–¸íŠ¸ì— ìˆìŒ

### v2. AppConfig ë„ì… (ê°ì²´ ìƒì„± ì±…ì„ ë¶„ë¦¬)

ğŸ‘‰ ëª©í‘œ
- ê°ì²´ ìƒì„± ì±…ì„ê³¼ ì‚¬ìš© ì±…ì„ ë¶„ë¦¬
- DIP, OCPë¥¼ ì½”ë“œë¡œ ì ìš©
- ì„¤ê³„ ê´€ì ì—ì„œ ê°ì²´ ì¡°ë¦½ ê°œë… ì´í•´

âš™ï¸ ë³€ê²½ ë‚´ìš©
- AppConfig í´ë˜ìŠ¤ ë„ì…
- êµ¬í˜„ì²´ ìƒì„± ë¡œì§ì„ AppConfigë¡œ ì´ë™
- í´ë¼ì´ì–¸íŠ¸(App)ëŠ” AppConfigë¥¼ í†µí•´ ì˜ì¡´ì„± ì£¼ì… ë°›ìŒ

ğŸ”§ ì½”ë“œ ë³€í™”
- App(MemberApp, OrderApp)ì—ì„œ êµ¬í˜„ì²´ ì§ì ‘ ìƒì„±(new) ì œê±°
- AppConfigì—ì„œ ê° ì—­í• ì— ë§ëŠ” êµ¬í˜„ì²´ë¥¼ ìƒì„±
- App(MemberApp, OrderApp)ì€ ì¸í„°í˜ì´ìŠ¤ íƒ€ì…ì—ë§Œ ì˜ì¡´

âš ï¸ í•´ê²°ëœ ë¬¸ì œ
- êµ¬í˜„ì²´ ë³€ê²½ ì‹œ App(MemberApp, OrderApp) ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”
- ê°ì²´ ìƒì„±ê³¼ ì—°ê²° ì±…ì„ì´ í•œ ê³³(AppConfig)ì— ì§‘ì¤‘
- ì—­í• ê³¼ êµ¬í˜„ì´ ëª…í™•íˆ ë¶„ë¦¬ë¨

ğŸ’¡ ì„¤ê³„ ê´€ì ì—ì„œì˜ ì˜ë¯¸
- ê³ ìˆ˜ì¤€ ëª¨ë“ˆ(App)ì´ ì €ìˆ˜ì¤€ ëª¨ë“ˆ(êµ¬í˜„ì²´)ì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ (DIP)
- ê¸°ëŠ¥ í™•ì¥ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ì—†ì´ êµ¬ì„± ë³€ê²½ë§Œìœ¼ë¡œ ëŒ€ì‘ ê°€ëŠ¥ (OCP)
- ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì½”ë“œê°€ ì•„ë‹ˆë¼ "ì„¤ì •"ìœ¼ë¡œ ì¡°ë¦½ëœë‹¤ëŠ” ê°œë… ì´í•´

### v3. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ë„ì…
- AppConfigëŠ” ë” ì´ìƒ ì§ì ‘ í˜¸ì¶œë˜ì§€ ì•ŠìŒ
- ì„¤ì • ì •ë³´(@Configuration, @Bean)ë¡œë§Œ ì‚¬ìš©
- ê°ì²´ ìƒì„±ê³¼ ì¡°ë¦½ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ë‹´ë‹¹
- new ì—†ì´ ë¹ˆì„ ì¡°íšŒí•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
- ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ë¹ˆ ì¡°íšŒì‹œ(ac.getBean()), ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´(ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ êµ¬í˜„í•œ í´ë˜ìŠ¤ê°€ ë‘˜ ì´ìƒ ìˆìœ¼ë©´) ì¤‘ë³µ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤ 
-> ì¡°íšŒí•˜ê³  ì‹¶ì€ ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ë©´ ëœë‹¤

### v4. ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆì™€ ìƒíƒœ ê´€ë¦¬
ğŸ‘‰ ì™œ ì´ ë‹¨ê³„ê°€ í•„ìš”í•œê°€

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì‹±ê¸€í†¤ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ë¥¼
ì½”ë“œì™€ í…ŒìŠ¤íŠ¸ë¡œ ê²€ì¦í•˜ê¸° ìœ„í•œ ë‹¨ê³„

âš ï¸ ìˆœìˆ˜ DI ì»¨í…Œì´ë„ˆì˜ ë¬¸ì œì 
- AppConfigë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ë©´ ìš”ì²­ë§ˆë‹¤ ìƒˆë¡œìš´ ê°ì²´ ìƒì„±
- ë™ì¼í•œ ì—­í• ì˜ ê°ì²´ê°€ ì—¬ëŸ¬ ê°œ ë§Œë“¤ì–´ì§
- ë©”ëª¨ë¦¬ ë‚­ë¹„ ë° ê´€ë¦¬ ë³µì¡ë„ ì¦ê°€

âš ï¸ ì‹±ê¸€í†¤ íŒ¨í„´ì˜ í•œê³„
- static ì¸ìŠ¤í„´ìŠ¤ ë°©ì‹
- private ìƒì„±ì
- í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ì›€
- DIP ìœ„ë°˜ ê°€ëŠ¥ì„±

ğŸ“Œ ìŠ¤í”„ë§ ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ
- ì»¨í…Œì´ë„ˆê°€ ê°ì²´ë¥¼ 1ê°œë§Œ ìƒì„±
- ìš”ì²­ ì‹œ ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜
- ê°œë°œìëŠ” ì‹±ê¸€í†¤ì„ ì§ì ‘ êµ¬í˜„í•˜ì§€ ì•ŠìŒ

â—â— ìƒíƒœ ìœ ì§€(stateful)ì˜ ìœ„í—˜ì„±
- ì‹±ê¸€í†¤ ê°ì²´ì— ê³µìœ í•„ë“œ, ìƒíƒœë¥¼ ë‘ë©´ ë¬¸ì œ ë°œìƒ
- ì—¬ëŸ¬ ìš”ì²­ì´ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ 
- **í•´ê²°**: ë¬´ìƒíƒœ(stateless) ì„¤ê³„

ğŸ‘‰ **ì‹¤ìŠµ ì½”ë“œ**: practice/spring/spring-core-basic/src/test/java/hello/core/section6_singleton

### v5. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ê¸°ë°˜ êµ¬ì„±

### ë³€ê²½ ë‚´ìš©
- AppConfigì˜ @Bean ë°©ì‹ ì œê±°
- @ComponentScan ë„ì…
- ê° êµ¬í˜„ í´ë˜ìŠ¤ì— @Component ê³„ì—´ ì• ë…¸í…Œì´ì…˜ ì ìš©
- ìƒì„±ì ê¸°ë°˜ @Autowiredë¡œ ì˜ì¡´ì„± ì£¼ì…

### ì½”ë“œ ë³€í™”
- MemberServiceImpl, OrderServiceImpl ë“±ì— @Service ì ìš©
- Repository êµ¬í˜„ì²´ì— @Repository ì ìš©
- í• ì¸ ì •ì±… êµ¬í˜„ì²´ì— @Component ì ìš©

### í™•ì¸ í¬ì¸íŠ¸
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìë™ìœ¼ë¡œ ë¹ˆì„ ë“±ë¡í•¨
- AppConfigì—ì„œ ê°ì²´ ìƒì„± ì½”ë“œê°€ ì‚¬ë¼ì§
- êµ¬í˜„ì²´ êµì²´ ì‹œ ì„¤ì • ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”

### ëŠë‚€ ì 
- ì„¤ì • ì½”ë“œ ì—†ì´ë„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¡°ë¦½ ê°€ëŠ¥
- ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì˜ ê°€ì¹˜ê°€ ì»¤ì§
- ëª…ì‹œì  ì„¤ì •(@Bean)ê³¼ì˜ ì°¨ì´ë¥¼ ëª…í™•íˆ ì´í•´í•´ì•¼ í•¨

### v6. ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…

#### ì™œ ìë™ ì£¼ì…ì´ í•„ìš”í•œê°€
- AppConfigì—ì„œ ê°ì²´ ìƒì„±/ì—°ê²° ì½”ë“œê°€ ê³„ì† ì¦ê°€
- êµ¬í˜„ ë³€ê²½ ì‹œ ì„¤ì • ì½”ë“œ ìˆ˜ì • í•„ìš”
- ì„¤ì • ì¤‘ì‹¬ êµ¬ì¡°ì˜ í•œê³„ ë°œìƒ

#### ìë™ ì£¼ì… ê¸°ë³¸ ì „ëµ
- @AutowiredëŠ” ê¸°ë³¸ì ìœ¼ë¡œ **íƒ€ì…(Type) ê¸°ì¤€ ì£¼ì…**
- ìƒì„±ìê°€ 1ê°œë©´ @Autowired ìƒëµ ê°€ëŠ¥
- ìƒì„± ì‹œì ì— ì˜ì¡´ê´€ê³„ê°€ í™•ì •ë¨

#### ìƒì„±ì ì£¼ì… ì‚¬ìš©
- ì˜ì¡´ê´€ê³„ë¥¼ ìƒì„±ìë¡œë§Œ ì£¼ì…
- í•„ìˆ˜ ì˜ì¡´ì„± ëˆ„ë½ ì‹œ ì»´íŒŒì¼/ì‹¤í–‰ ë‹¨ê³„ì—ì„œ ë°”ë¡œ ì˜¤ë¥˜ í™•ì¸ ê°€ëŠ¥
- ë¶ˆë³€ ê°ì²´ ì„¤ê³„ ê°€ëŠ¥
- @RequiredArgsConstructor ì‚¬ìš© ì‹œ @Autowired, ìƒì„±ì ìƒì„± ì½”ë“œ ì—†ì–´ë„ ê°€ëŠ¥
  - ğŸ‘‰ section7_componentscan, section8_autowired OrderServiceImpl ì½”ë“œ ë¹„êµ ì‹œ í™•ì¸ ê°€ëŠ¥

#### í•„ë“œ ì£¼ì…ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ìœ 
- í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ì›€
- DI ì»¨í…Œì´ë„ˆ ì˜ì¡´ ì¦ê°€
- ê°ì²´ ë¶ˆë³€ì„± ìœ ì§€ ë¶ˆê°€

#### ê°™ì€ íƒ€ì…ì˜ ë¹ˆì´ ì—¬ëŸ¬ ê°œì¼ ë•Œ ë¬¸ì œ
- íƒ€ì… ê¸°ì¤€ ì¡°íšŒ ì‹œ ë¹ˆì„ í•˜ë‚˜ë¡œ ê²°ì •í•  ìˆ˜ ì—†ìŒ
- DiscountPolicy êµ¬í˜„ì²´ê°€ 2ê°œ ì´ìƒì¼ ê²½ìš° ì¶©ëŒ ë°œìƒ
- ë°œìƒ ì˜ˆì™¸:
    - NoUniqueBeanDefinitionException

#### í•´ê²° ë°©ë²• 1: @Qualifier
- ì£¼ì… ì‹œ ë¹ˆ ì´ë¦„ì„ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •
- ì •í™•í•œ êµ¬í˜„ì²´ ì„ íƒ ê°€ëŠ¥
- ì´ë¦„ ê¸°ë°˜ì´ë¯€ë¡œ ì˜¤íƒ€ì— ì·¨ì•½

#### í•´ê²° ë°©ë²• 2: @Primary
- ì—¬ëŸ¬ ë¹ˆ ì¤‘ ê¸°ë³¸ìœ¼ë¡œ ì„ íƒë  ë¹ˆ ì§€ì •
- ë³„ë„ ì§€ì • ì—†ìœ¼ë©´ @Primary ë¹ˆì´ ìš°ì„  ì£¼ì…ë¨
- ë©”ì¸ êµ¬í˜„ì²´ í•˜ë‚˜ë§Œ ì¡´ì¬í•˜ëŠ” ê²½ìš°ì— ì í•©
- ğŸ‘‰ **ì‹¤ìŠµ ì½”ë“œ**: practice/spring/spring-core-basic/src/main/java/hello/core/section8_autowired/discount/RateDiscountPolicyImpl

#### @Qualifier vs @Primary
- @Qualifier: ëª…í™•í•œ ì„ íƒ
- @Primary: ê¸°ë³¸ê°’ ì„¤ì •
- ìš°ì„ ìˆœìœ„: @Qualifier > @Primary
- ë§ì´ ì‚¬ìš©: @Qualifier < @Primary

#### ëª¨ë“  ë¹ˆ ì¡°íšŒ
- ê°™ì€ íƒ€ì…ì˜ ë¹ˆì„ ëª¨ë‘ ì£¼ì…ë°›ì„ ìˆ˜ ìˆìŒ
- Map ë˜ëŠ” List í˜•íƒœë¡œ ì¡°íšŒ ê°€ëŠ¥
- ì „ëµ íŒ¨í„´ êµ¬í˜„ì— í™œìš© ê°€ëŠ¥
  ğŸ‘‰ **ì‹¤ìŠµ ì½”ë“œ**: practice/spring/spring-core-basic/src/test/java/hello/core/section8_autowired/AllBeanTest

#### ë³€ê²½ ë‚´ìš©
- ìƒì„±ì ê¸°ë°˜ ìë™ ì£¼ì… ì ìš©

#### í™•ì¸ í¬ì¸íŠ¸
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê°ì²´ ìƒì„±ê³¼ ì˜ì¡´ê´€ê³„ ì—°ê²° ë‹´ë‹¹
- êµ¬í˜„ êµì²´ ì‹œ ì„¤ì • ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”
- ì—­í• ê³¼ êµ¬í˜„ ë¶„ë¦¬ êµ¬ì¡° ìœ ì§€

#### ëŠë‚€ ì 
- ìë™ ì£¼ì…ì€ ì„¤ì • ì½”ë“œ ê°ì†Œ íš¨ê³¼ê°€ í¼
- ìƒì„±ì ì£¼ì…ì´ êµ¬ì¡°ì ìœ¼ë¡œ ê°€ì¥ ì•ˆì „í•¨
- @Qualifier, @PrimaryëŠ” í•„ìš”í•  ë•Œë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ


### v7. ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±

#### ì™œ ì´ ë‹¨ê³„ê°€ í•„ìš”í•œê°€
- ìŠ¤í”„ë§ ë¹ˆì€ ìƒì„±ë¶€í„° ì†Œë©¸ê¹Œì§€ ìƒëª…ì£¼ê¸°ë¥¼ ê°€ì§
- íŠ¹ì • ì‹œì ì— ì´ˆê¸°í™” / ì¢…ë£Œ ë¡œì§ì´ í•„ìš”í•œ ê²½ìš°ê°€ ë§ìŒ
  - DB ì—°ê²°
  - ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ ì—°ê²°
  - ìºì‹œ ì´ˆê¸°í™”
  - ìì› ì •ë¦¬(close)

#### ìŠ¤í”„ë§ ë¹ˆ ìƒëª…ì£¼ê¸°
- ê°ì²´ ìƒì„±
- ì˜ì¡´ê´€ê³„ ì£¼ì…
- ì´ˆê¸°í™” ì½œë°±
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰
- ì†Œë©¸ ì½œë°±

- ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ëë‚œ ë’¤ ì´ˆê¸°í™” ì½œë°± í˜¸ì¶œ
- ìƒì„±ìì—ì„œëŠ” ì£¼ì…ëœ ì˜ì¡´ì„±ì„ ì™„ì „íˆ ì‹ ë¢°í•˜ë©´ ì•ˆ ë¨

#### ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°± ë°©ë²• 3ê°€ì§€

---

#### 1. ì¸í„°í˜ì´ìŠ¤ ë°©ì‹ (ì´ˆê¸° ë°©ì‹)
- InitializingBean
- DisposableBean

- ì´ˆê¸°í™”: afterPropertiesSet()
- ì†Œë©¸: destroy()

ë‹¨ì 
- ìŠ¤í”„ë§ ì˜ì¡´ì 
- ë©”ì„œë“œ ì´ë¦„ ë³€ê²½ ë¶ˆê°€
- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì ìš© ë¶ˆê°€

â†’ í˜„ì¬ëŠ” ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ

#### 2. ì„¤ì • ì •ë³´(@Bean) ë°©ì‹
- @Bean(initMethod = "init", destroyMethod = "close")

ì¥ì 
- ìŠ¤í”„ë§ ì½”ë“œ ì˜ì¡´ ì—†ìŒ
- ë©”ì„œë“œ ì´ë¦„ ììœ 
- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ë„ ì ìš© ê°€ëŠ¥

íŠ¹ì§•
- destroyMethod ê¸°ë³¸ê°’
- close, shutdown ë©”ì„œë“œ ìë™ í˜¸ì¶œ

#### 3. ì• ë…¸í…Œì´ì…˜ ë°©ì‹ (ê¶Œì¥)
- @PostConstruct
- @PreDestroy
  - ğŸ‘‰ **ì‹¤ìŠµ ì½”ë“œ**: practice/spring/spring-core-basic/src/test/java/hello/core/section9_lifecycle

ì¥ì 
- ì½”ë“œê°€ ì§ê´€ì 
- í‘œì¤€(JSR-250)
- ìŠ¤í”„ë§ ì™¸ í™˜ê²½ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥
- ì‹¤ë¬´ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©

#### ì½”ë“œ ë³€í™” (ì‹¤ìŠµ í¬ì¸íŠ¸)
- ìƒì„±ìì—ì„œ ì´ˆê¸°í™” ë¡œì§ ì œê±°
- @PostConstructë¡œ ì´ˆê¸°í™” ì²˜ë¦¬
- @PreDestroyë¡œ ì¢…ë£Œ ë¡œì§ ì´ë™
- ë¡œê·¸ ì¶œë ¥ìœ¼ë¡œ í˜¸ì¶œ ì‹œì  í™•ì¸

#### í™•ì¸ í¬ì¸íŠ¸
- ìƒì„±ì â†’ ì˜ì¡´ê´€ê³„ ì£¼ì… â†’ ì´ˆê¸°í™” ìˆœì„œ í™•ì¸
- ì»¨í…Œì´ë„ˆ ì¢…ë£Œ ì‹œ ì†Œë©¸ ì½œë°± í˜¸ì¶œ ì—¬ë¶€
- ì‹±ê¸€í†¤ ë¹ˆì€ ì»¨í…Œì´ë„ˆ ì¢…ë£Œ ì‹œì—ë§Œ ì†Œë©¸


#### ì •ë¦¬
- ìƒì„±ì: í•„ìˆ˜ ê°’ ì£¼ì…
- ì´ˆê¸°í™” ì½œë°±: ì™¸ë¶€ ìì› ì—°ê²°
- ì†Œë©¸ ì½œë°±: ìì› ì •ë¦¬

ì—­í•  ë¶„ë¦¬ê°€ í•µì‹¬

#### ëŠë‚€ ì 
- ë¹ˆ ìƒëª…ì£¼ê¸°ë¥¼ ì´í•´í•´ì•¼ ì•ˆì „í•œ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ ê°€ëŠ¥
- ìƒì„±ìì— ë¡œì§ì„ ë„£ëŠ” ìŠµê´€ì€ ìœ„í—˜
- @PostConstruct, @PreDestroyë§Œ ì˜ ì‚¬ìš©í•´ë„ ì‹¤ë¬´ ì¶©ë¶„