# 섹션2. 웹 애플리케이션 이해

## 1. 웹 애플리케이션이란?
- 인터넷(HTTP)을 통해 클라이언트의 요청을 받고
- 서버에서 로직을 처리한 뒤
- HTML, JSON 등의 형태로 응답을 내려주는 애플리케이션

백엔드 개발자는 주로 **서버 쪽 로직과 데이터 처리**를 담당한다.

---

## 2. 클라이언트와 서버

### 클라이언트(Client)
- 웹 브라우저, 모바일 앱 등
- 사용자의 입력을 받아 서버에 요청(Request)을 보냄
- 서버의 응답(Response)을 화면에 렌더링

### 서버(Server)
- 클라이언트 요청을 받아 처리
- 비즈니스 로직 실행
- DB 조회 / 저장
- 결과를 응답으로 반환

---

## 3. 웹 서버(Web Server)
- HTTP 기반으로 동작
- 정적 리소스 제공 (HTML, CSS, JS, 이미지 등)
- 대표 예시: Nginx, Apache

주요 역할:
- 정적 파일 서빙
- WAS 앞단에서 요청 분산(리버스 프록시)
- 보안, SSL 처리

---

## 4. WAS(Web Application Server)
- 웹 서버 기능 + 애플리케이션 로직 수행
- 동적 컨텐츠 생성
- 비즈니스 로직 실행 가능

대표 예시:
- Tomcat
- Jetty
- Undertow

스프링 애플리케이션은 보통 **WAS 위에서 실행**된다.

---

## 5. 웹 서버와 WAS를 분리하는 이유
- 정적 리소스는 웹 서버가 처리
- 동적 로직은 WAS가 처리
- 역할 분리로 성능, 보안, 확장성 향상
- 정적 리소스만 제공하는 웹 서버는 잘 죽지 않는다 하지만 애플리케이션 로직이 동작하는 WAS 서버는 잘 죽는다
-> WAS, DB 장애시 WEB 서버가 오류 화면 제공 가능하도록 WEB 서버와 WAS를 분리한다

실무 구조:
- Client → Web Server → WAS → DB
- 정적 리소스가 많이 사용되면 웹 서버 증설
- 애플리케이션 리소스가 많이 사용되면 WAS 증설

---

## 6. HTTP 요청 / 응답 흐름

1. 클라이언트가 URL 요청
2. 웹 서버가 정적 리소스인지 판단
3. 동적 요청이면 WAS로 전달
4. WAS에서 비즈니스 로직 처리
5. 응답 생성
6. 클라이언트로 응답 반환

---

## 7. 정적 리소스 vs 동적 리소스

### 정적 리소스
- 서버에서 그대로 내려줌
- HTML, CSS, JS, 이미지
- 요청마다 결과가 동일

### 동적 리소스
- 서버 로직 실행 결과
- 요청에 따라 결과가 달라짐
- 예: 로그인, 게시글 조회

---

## 8. SSR과 CSR 개념

### SSR(Server Side Rendering)
- 서버에서 HTML을 만들어서 내려줌
- 초기 로딩 빠름
- 전통적인 MVC 방식
- 타임리프, JSP
- 주로 정적인 화면에 사용

### CSR(Client Side Rendering)
- 서버는 데이터(JSON)만 제공
- 브라우저에서 JS로 화면 구성
- React, Vue 등 SPA 방식
- 주로 동적인 화면에 사용

스프링 MVC는 기본적으로 **SSR 기반**이다.

---

## 9. 서블릿(Servlet)

### 서블릿이란?
- 자바로 웹 요청을 처리하기 위한 표준 기술
- HTTP 요청을 받아서 응답을 생성하는 서버 쪽 프로그램
- WAS 내부에서 동작

스프링 MVC는 내부적으로 **서블릿을 기반**으로 동작한다.

---

### 서블릿의 역할
- WAS(스레드)는 Request, Response 객체를 새로 만들어서 서블릿 객체 호출 
- 개발자는 Request 객체에서 HTTP 요청 정보를 편리하게 꺼내서 사용
- 개발자는 Response 객체에 HTTP 응답 정보를 편리하게 입력 
- WAS는 Response 객체에 담겨있는 내용으로 HTTP 응답 정보를 생성

---

### 서블릿 컨테이너
- 서블릿의 생명주기를 관리
- 멀티스레드 처리 지원
- 서블릿 객체는 싱글톤으로 관리 그러므로 공유 변수 사용 주의
- 대표 예시: Tomcat

---

## 10. 멀티스레드(Multi Thread)

### 스레드
- 서블릿 객체를 호출하는 건 스레드다
- 스레드가 없다면 자바 애플리케이션 실행할 수 없다

### 멀티스레드란?
- 하나의 프로세스 안에서 여러 스레드가 동시에 작업 수행
- 하나의 WAS는 여러 요청을 동시에 처리할 수 있음

---

### 요청 처리 방식
- 클라이언트 요청 1건당 스레드 1개 할당
- 여러 사용자의 요청을 동시에 처리 가능

---

### 멀티스레드의 장점
- 자원 효율적
- 빠른 응답 처리
- 동시 사용자 처리 가능

---

### 멀티스레드의 주의점
- 공유 자원에 대한 동시 접근 문제
- 동기화 필요
- 상태를 가지는 객체는 주의해서 설계해야 함

👉 **스프링 빈은 기본적으로 싱글톤이므로**
👉 필드에 상태를 저장하면 안 된다.

---

## 11. 스레드 풀(Thread Pool)

### 스레드 풀이란?
- 미리 생성해 둔 스레드를 재사용하는 방식
- 요청마다 새 스레드를 생성하지 않음
- WAS가 내부적으로 관리(기본 200)

---

### 스레드 풀을 사용하는 이유
- 스레드 생성/삭제 비용 감소
- 서버 자원 보호
- 과도한 요청으로 인한 서버 다운 방지

---

### 동작 방식
1. 서버 시작 시 일정 수의 스레드를 미리 생성
2. 요청이 오면 대기 중인 스레드에 할당
3. 작업 종료 후 스레드는 다시 풀로 반환

---

### 스레드 풀의 핵심 설정
- 최대 스레드 수
- 대기 큐 크기

이 설정에 따라:
- 동시 처리 가능 요청 수
- 서버 안정성이 결정됨

---

### 스레드 풀 한계 상황
- 스레드가 모두 사용 중이면 요청은 대기
- 대기 큐까지 꽉 차면 요청 거절 또는 오류 발생

👉 무한 스레드 생성은 서버 장애의 원인

🚨 쓰레드 풀의 적정 숫자를 찾기 위해 **성능 테스트**를 진행하는 것 🚨

---

## 12. 스프링에서 중요한 포인트
- 요청은 스레드 단위로 처리됨
- 스프링 빈은 싱글톤 + 멀티스레드 환경
- 상태를 가지는 필드 사용 금지
- 지역 변수, 파라미터 사용 권장

---

## 13. 백엔드 개발자가 신경 써야 할 포인트
- 요청과 응답의 흐름 이해
- 웹 서버 / WAS 역할 구분
- HTTP 기반 통신 이해
- 서버에서 책임져야 할 영역 명확히 인지
- 멀티스레드 환경에서의 주의점
- **개발 시 고민해야 하는 것**
  - 정적 리소스를 어떻게 제공?
  - 동적으로 제공되는 HTML 페이지(CSR) 어떻게 제공?
  - HTTP API(JSON 응답) 어떻게 제공?

이 개념들은 이후 **서블릿 → MVC → 스프링 구조 이해의 기반**이 된다.