# HTTP - Cookie & Redirect 정리

---

# 1️⃣ Cookie (쿠키)

## 📌 쿠키란?

- HTTP는 **무상태(Stateless) 프로토콜**
- 서버는 이전 요청을 기억하지 못함
- 상태 유지를 위해 클라이언트에 저장하는 작은 데이터가 **쿠키**

👉 서버가 응답 시 쿠키를 내려주면  
브라우저가 저장 후 다음 요청마다 자동으로 전송

---

## 📌 동작 흐름

1. 서버 → 응답 시 `Set-Cookie` 헤더 전달
2. 브라우저 → 쿠키 저장
3. 이후 요청 시 → `Cookie` 헤더에 포함되어 자동 전송

---

## 📌 주요 속성

### 1. 이름 / 값
- key=value 형태

### 2. 유효 시간
- `Max-Age`
- 지정 안 하면 브라우저 종료 시 삭제

### 3. 도메인
- 특정 도메인에서만 쿠키 전송

### 4. 경로(Path)
- 특정 경로에서만 쿠키 전송

### 5. 보안 옵션
- Secure → HTTPS에서만 전송
- HttpOnly → JS 접근 차단 (XSS 방어)
- SameSite → CSRF 방어

---

## 📌 특징 정리

- 클라이언트에 저장됨
- 요청마다 자동 전송
- 4KB 이하 작은 데이터 저장
- 보안에 취약 → 민감 정보 저장 금지

---

## 📌 사용 예

- 로그인 상태 유지
- 사용자 설정 값 저장
- 최근 본 상품

---

# 2️⃣ Redirect (리다이렉트)

## 📌 Redirect란?

- 서버가 클라이언트에게
  "이 주소로 다시 요청해라"라고 응답하는 것

👉 클라이언트가 새로운 URL로 다시 요청을 보냄

---

## 📌 왜 필요한가?

### 1. PRG 패턴 (Post-Redirect-Get)

문제:
- POST 요청 후 새로고침 시 중복 저장 발생

해결:
- POST 처리 후 Redirect
- 이후 GET 요청으로 화면 조회

👉 중복 제출 방지

---

## 📌 동작 흐름

1. 클라이언트 → POST 요청
2. 서버 → 처리 후 302 응답 + Location 헤더
3. 브라우저 → 해당 URL로 GET 재요청

---

## 📌 Forward vs Redirect 차이

| 구분 | Forward | Redirect |
|------|----------|----------|
| 요청 횟수 | 1번 | 2번 |
| URL 변경 | X | O |
| 브라우저 재요청 | X | O |
|서버 내부 이동 | O | X |
| 데이터 유지 | request 유지 | request 소멸 |
| 주 사용처 | 에러 페이지 처리 | 로그인 완료 |
---

## 📌 상태 코드

- 302 Found (일반적)
- 301 Moved Permanently
- 303 See Other (POST 이후 권장)

---

# 📌 핵심 정리

✔ HTTP는 Stateless  
✔ 상태 유지를 위해 Cookie 사용  
✔ 중복 요청 방지를 위해 Redirect 사용  
✔ 실무에서는 PRG 패턴이 기본

---

# 🔥 한 줄 요약

- Cookie = 상태 유지 수단, 웹사이트가 사용자를 기억하기 위한 장치
- Redirect = 새로운 요청을 강제하는 응답, 사용자를 올바른 위치로 자동 안내하기 위한 웹의 길 안내 시스템