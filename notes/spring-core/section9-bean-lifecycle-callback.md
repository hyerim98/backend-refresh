## 섹션 9. 빈 생명주기 콜백

### 빈 생명주기란?
- 스프링 빈은 생성부터 소멸까지 명확한 생명주기를 가짐
- 특정 시점에 초기화 / 종료 작업이 필요한 경우 사용

예시
- DB 커넥션 연결 / 종료
- 네트워크 소켓 연결
- 캐시 데이터 초기화
- 파일, 스레드 자원 정리

### 스프링 빈 생명주기 흐름
1. 객체 생성
2. 의존관계 주입
3. 초기화 콜백
4. 비즈니스 로직 수행
5. 소멸 콜백

중요 포인트
- 초기화 콜백은 의존관계 주입이 끝난 뒤 호출됨
- 생성자에서는 외부 자원 사용 로직을 넣지 않는 것이 좋음

### 빈 생명주기 콜백 방법 3가지

---

### 1. 인터페이스 방식
- InitializingBean
- DisposableBean

메서드
- afterPropertiesSet()
- destroy()

단점
- 스프링에 강하게 의존
- 메서드 이름 변경 불가
- 외부 라이브러리에 적용 불가

→ 현재는 거의 사용하지 않음


### 2. 설정 정보(@Bean) 방식
- @Bean(initMethod = "init", destroyMethod = "close")

장점
- 스프링 의존 없음
- 메서드 이름 자유
- 외부 라이브러리에도 적용 가능

특징
- destroyMethod 기본값 제공
- close, shutdown 메서드 자동 호출


### 3. 애노테이션 방식 (권장)
- @PostConstruct
- @PreDestroy
  - 👉 **실습 코드**: practice/spring/spring-core-basic/src/test/java/hello/core/section9_lifecycle

장점
- 코드가 직관적
- 표준(JSR-250)
- 스프링 외 환경에서도 사용 가능
- 실무에서 가장 많이 사용


### 언제 어떤 방식을 쓰는가
- 일반적인 경우 → @PostConstruct / @PreDestroy
- 외부 라이브러리 → @Bean 방식
- 인터페이스 방식 → 학습용


### 설계 관점 정리
- 생성자: 필수 값 주입
- 초기화 콜백: 외부 자원 연결
- 소멸 콜백: 자원 정리

역할을 분리해야 유지보수성과 안정성이 좋아짐


### 핵심 요약
- 빈 생명주기는 생성과 소멸을 명확히 구분하는 개념
- 생성자에 로직을 넣지 말 것
- @PostConstruct, @PreDestroy만 제대로 써도 실무 충분